<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Ä–∫–æ–∫–∞—Ä—Ç–∞ - –ö–∞—Ä—Ç–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–æ—á–µ–∫</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <!-- Font Awesome –¥–ª—è –∏–∫–æ–Ω–æ–∫ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loader -->
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-map-marked-alt"></i>
                    <h1>–ù–∞—Ä–∫–æ–∫–∞—Ä—Ç–∞</h1>
                </div>

                <nav class="nav">
                    <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç -->
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
                <button id="closeSidebar" class="btn-icon">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="filters">
                <!-- –¢–∏–ø –º–µ—Ç–æ–∫ -->
                <div class="filter-group">
                    <label>–¢–∏–ø:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="type" value="den" checked>
                            <i class="fas fa-home"></i> –ü—Ä–∏—Ç–æ–Ω
                        </label>
                        <label>
                            <input type="checkbox" name="type" value="ad" checked>
                            <i class="fas fa-bullhorn"></i> –†–µ–∫–ª–∞–º–∞
                        </label>
                        <label>
                            <input type="checkbox" name="type" value="courier" checked>
                            <i class="fas fa-walking"></i> –ö—É—Ä—å–µ—Ä
                        </label>
                        <label>
                            <input type="checkbox" name="type" value="user" checked>
                            <i class="fas fa-user"></i> –£–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
                        </label>
                        <label>
                            <input type="checkbox" name="type" value="trash" checked>
                            <i class="fas fa-trash"></i> –ú—É—Å–æ—Ä
                        </label>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="filter-actions">
                    <button id="applyFilters" class="btn btn-primary btn-block">
                        <i class="fas fa-filter"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                    </button>
                    <button id="resetFilters" class="btn btn-secondary btn-block">
                        <i class="fas fa-undo"></i> –°–±—Ä–æ—Å–∏—Ç—å
                    </button>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="stats" id="stats">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="stats-item">
                        <span>–ú–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ:</span>
                        <strong id="totalMarkers">0</strong>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Map Container -->
        <div class="map-container">
            <div id="map"></div>

            <!-- Floating Action Buttons -->
            <div class="fab-container">
                <button id="toggleSidebar" class="fab" title="–§–∏–ª—å—Ç—Ä—ã">
                    <i class="fas fa-filter"></i>
                </button>
                <button id="myLocation" class="fab" title="–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ">
                    <i class="fas fa-crosshairs"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- Modal: Add Marker (Simplified) -->
    <div id="markerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</label>
                    <div class="coords-display">
                        <span id="markerLat"></span>, <span id="markerLon"></span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="markerType">–¢–∏–ø –º–µ—Ç–∫–∏:</label>
                    <select id="markerType" class="form-control">
                        <option value="den">üèö –ü—Ä–∏—Ç–æ–Ω</option>
                        <option value="ad">üì¢ –†–µ–∫–ª–∞–º–∞</option>
                        <option value="courier">üö∂ –ö—É—Ä—å–µ—Ä</option>
                        <option value="user">üíä –£–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ</option>
                        <option value="trash">üóë –ú—É—Å–æ—Ä</option>
                    </select>
                    <small class="form-text">–¶–≤–µ—Ç –º–µ—Ç–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ç–∏–ø—É</small>
                </div>

                <div class="form-group">
                    <label for="markerAddress">–ê–¥—Ä–µ—Å:</label>
                    <input type="text" id="markerAddress" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –ø–æ–¥—ä–µ–∑–¥, –∫–≤–∞—Ä—Ç–∏—Ä–∞, —ç—Ç–∞–∂..." class="form-control">
                    <small class="form-text">–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç—É –∑–¥–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã. –ú–æ–∂–µ—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å</small>
                </div>

                <div class="form-group">
                    <label for="markerDescription">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                    <textarea id="markerDescription" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É..." class="form-control"></textarea>
                    <small class="form-text">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Ç—É–∞—Ü–∏–∏</small>
                </div>

                <div class="form-group">
                    <label for="markerPhoto">–§–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                    <input type="file" id="markerPhoto" accept="image/*" class="form-control">
                    <small class="form-text">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB. –§–æ—Ç–æ –ø–æ–º–æ–∂–µ—Ç –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º</small>
                </div>

                <button id="submitMarker" class="btn btn-primary btn-block">
                    <i class="fas fa-map-marker-alt"></i> –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–∫—É
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="app.js"></script>
</body>
</html>
